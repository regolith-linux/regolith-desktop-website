/*! medium-zoom 1.1.0 | MIT License | https://github.com/francoischalifour/medium-zoom */(function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self,e.mediumZoom=t())})(this,function(){"use strict";var a,e=Object.assign||function(e){for(var t,s,n=1;n<arguments.length;n++){t=arguments[n];for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},n=function(t){return t.tagName==="IMG"},r=function(t){return NodeList.prototype.isPrototypeOf(t)},s=function(t){return t&&t.nodeType===1},o=function(t){var n=t.currentSrc||t.src;return n.substr(-4).toLowerCase()===".svg"},i=function(t){try{return Array.isArray(t)?t.filter(n):r(t)?[].slice.call(t).filter(n):s(t)?[t].filter(n):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(n):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},c=function(t){var n=document.createElement("div");return n.classList.add("medium-zoom-overlay"),n.style.background=t,n},l=function(t){var s=t.getBoundingClientRect(),o=s.top,i=s.left,a=s.width,r=s.height,n=t.cloneNode(),c=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,l=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return n.removeAttribute("id"),n.style.position="absolute",n.style.top=o+c+"px",n.style.left=i+l+"px",n.style.width=a+"px",n.style.height=r+"px",n.style.transform="",n},t=function(n,s){var i,o=e({bubbles:!1,cancelable:!1,detail:void 0},s);return typeof window.CustomEvent=="function"?new CustomEvent(n,o):(i=document.createEvent("CustomEvent"),i.initCustomEvent(n,o.bubbles,o.cancelable,o.detail),i)},d=function n(a){var u,p,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=window.Promise||function(t){function n(){}t(n,n)},T=function(t){var n=t.target;if(n===p){m();return}if(h.indexOf(n)===-1)return;_({target:n})},F=function(){if(f||!r.original)return;var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(v-t)>d.scrollOffset&&setTimeout(m,150)},M=function(t){var n=t.key||t.keyCode;(n==="Escape"||n==="Esc"||n===27)&&m()},A=function(){var a,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=o;return o.background&&(p.style.background=o.background),o.container&&o.container instanceof Object&&(i.container=e({},d.container,o.container)),o.template&&(a=s(o.template)?o.template:document.querySelector(o.template),i.template=a),d=e({},d,i),h.forEach(function(e){e.dispatchEvent(t("medium-zoom:update",{detail:{zoom:u}}))}),u},w=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n(e({},d,s))},b=function(){for(var n,s=arguments.length,o=Array(s),t=0;t<s;t++)o[t]=arguments[t];return n=o.reduce(function(e,t){return[].concat(e,i(t))},[]),n.filter(function(e){return h.indexOf(e)===-1}).forEach(function(e){h.push(e),e.classList.add("medium-zoom-image")}),g.forEach(function(e){var t=e.type,s=e.listener,o=e.options;n.forEach(function(e){e.addEventListener(t,s,o)})}),u},S=function(){for(var o,a=arguments.length,s=Array(a),n=0;n<a;n++)s[n]=arguments[n];return r.zoomed&&m(),o=s.length>0?s.reduce(function(e,t){return[].concat(e,i(t))},[]):h,o.forEach(function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(t("medium-zoom:detach",{detail:{zoom:u}}))}),h=h.filter(function(e){return o.indexOf(e)===-1}),u},E=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return h.forEach(function(e){e.addEventListener("medium-zoom:"+t,n,s)}),g.push({type:"medium-zoom:"+t,listener:n,options:s}),u},C=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return h.forEach(function(e){e.removeEventListener("medium-zoom:"+t,n,s)}),g=g.filter(function(e){return e.type!=="medium-zoom:"+t||e.listener.toString()!==n.toString()}),u},y=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=c.target,a=function(){if(n={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},i=void 0,a=void 0,d.container)if(d.container instanceof Object)n=e({},n,d.container),i=n.width-n.left-n.right-d.margin*2,a=n.height-n.top-n.bottom-d.margin*2;else{var n,A=s(d.container)?d.container:document.querySelector(d.container),u=A.getBoundingClientRect(),g=u.width,C=u.height,w=u.left,_=u.top;n=e({},n,{width:g,height:C,left:w,top:_})}var i=i||n.width-d.margin*2,a=a||n.height-d.margin*2,c=r.zoomedHd||r.original,b=o(c)?i:c.naturalWidth||i,v=o(c)?a:c.naturalHeight||a,l=c.getBoundingClientRect(),j=l.top,y=l.left,f=l.width,m=l.height,O=Math.min(Math.max(f,b),i)/f,x=Math.min(Math.max(m,v),a)/m,h=Math.min(O,x),E=(-y+(i-f)/2+d.margin+n.left)/h,k=(-j+(a-m)/2+d.margin+n.top)/h,p="scale("+h+") translate3d("+E+"px, "+k+"px, 0)";r.zoomed.style.transform=p,r.zoomedHd&&(r.zoomedHd.style.transform=p)};return new j(function(e){if(i&&h.indexOf(i)===-1){e(u);return}var n,o,c,g,b=function n(){f=!1,r.zoomed.removeEventListener("transitionend",n),r.original.dispatchEvent(t("medium-zoom:opened",{detail:{zoom:u}})),e(u)};if(r.zoomed){e(u);return}if(i)r.original=i;else if(h.length>0)o=h,r.original=o[0];else{e(u);return}r.original.dispatchEvent(t("medium-zoom:open",{detail:{zoom:u}})),v=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,f=!0,r.zoomed=l(r.original),document.body.appendChild(p),d.template&&(c=s(d.template)?d.template:document.querySelector(d.template),r.template=document.createElement("div"),r.template.appendChild(c.content.cloneNode(!0)),document.body.appendChild(r.template)),r.original.parentElement&&r.original.parentElement.tagName==="PICTURE"&&r.original.currentSrc&&(r.zoomed.src=r.original.currentSrc),document.body.appendChild(r.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),r.original.classList.add("medium-zoom-image--hidden"),r.zoomed.classList.add("medium-zoom-image--opened"),r.zoomed.addEventListener("click",m),r.zoomed.addEventListener("transitionend",b),r.original.getAttribute("data-zoom-src")?(r.zoomedHd=r.zoomed.cloneNode(),r.zoomedHd.removeAttribute("srcset"),r.zoomedHd.removeAttribute("sizes"),r.zoomedHd.removeAttribute("loading"),r.zoomedHd.src=r.zoomed.getAttribute("data-zoom-src"),r.zoomedHd.onerror=function(){clearInterval(n),console.warn("Unable to reach the zoom image target "+r.zoomedHd.src),r.zoomedHd=null,a()},n=setInterval(function(){r.zoomedHd.complete&&(clearInterval(n),r.zoomedHd.classList.add("medium-zoom-image--opened"),r.zoomedHd.addEventListener("click",m),document.body.appendChild(r.zoomedHd),a())},10)):r.original.hasAttribute("srcset")?(r.zoomedHd=r.zoomed.cloneNode(),r.zoomedHd.removeAttribute("sizes"),r.zoomedHd.removeAttribute("loading"),g=r.zoomedHd.addEventListener("load",function(){r.zoomedHd.removeEventListener("load",g),r.zoomedHd.classList.add("medium-zoom-image--opened"),r.zoomedHd.addEventListener("click",m),document.body.appendChild(r.zoomedHd),a()})):a()})},m=function(){return new j(function(e){if(f||!r.original){e(u);return}var n=function n(){r.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(r.zoomed),r.zoomedHd&&document.body.removeChild(r.zoomedHd),document.body.removeChild(p),r.zoomed.classList.remove("medium-zoom-image--opened"),r.template&&document.body.removeChild(r.template),f=!1,r.zoomed.removeEventListener("transitionend",n),r.original.dispatchEvent(t("medium-zoom:closed",{detail:{zoom:u}})),r.original=null,r.zoomed=null,r.zoomedHd=null,r.template=null,e(u)};f=!0,document.body.classList.remove("medium-zoom--opened"),r.zoomed.style.transform="",r.zoomedHd&&(r.zoomedHd.style.transform=""),r.template&&(r.template.style.transition="opacity 150ms",r.template.style.opacity=0),r.original.dispatchEvent(t("medium-zoom:close",{detail:{zoom:u}})),r.zoomed.addEventListener("transitionend",n)})},_=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.target;return r.original?m():y({target:n})},O=function(){return d},k=function(){return h},z=function(){return r.original},h=[],g=[],f=!1,v=0,d=x,r={original:null,zoomed:null,zoomedHd:null,template:null};return Object.prototype.toString.call(a)==="[object Object]"?d=a:(a||typeof a=="string")&&b(a),d=e({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},d),p=c(d.background),document.addEventListener("click",T),document.addEventListener("keyup",M),document.addEventListener("scroll",F),window.addEventListener("resize",m),u={open:y,close:m,toggle:_,update:A,clone:w,attach:b,detach:S,on:E,off:C,getOptions:O,getImages:k,getZoomedImage:z},u};function u(e,t){t===void 0&&(t={});var n,s,o=t.insertAt;if(!e||typeof document=="undefined")return;s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style"),n.type="text/css",o==="top"?s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}return a=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}",u(a),d})